CREATE TYPE JOB_TYPE_ENUM AS ENUM ('support', 'driver', 'scout');
CREATE TABLE s309613.Person(person_id SERIAL PRIMARY KEY, phone_number VARCHAR(20) NOT NULL, name VARCHAR(50) NOT NULL, surname VARCHAR(50) NOT NULL);
CREATE TABLE s309613."User"(user_id SERIAL PRIMARY KEY, person_id INTEGER REFERENCES s309613.Person NOT NULL);
CREATE TABLE s309613.Job(job_id SERIAL PRIMARY KEY, salary INTEGER, CHECK (salary > 0));
CREATE TABLE s309613.Employee(employee_id SERIAL PRIMARY KEY, job_type JOB_TYPE_ENUM NOT NULL, person_id INTEGER REFERENCES s309613.Person NOT NULL);
CREATE TABLE s309613.Appointment(job_id INTEGER REFERENCES s309613.Job NOT NULL, employee_id INTEGER REFERENCES s309613.Employee NOT NULL, "date" DATE NOT NULL);
CREATE TABLE s309613.Employee_movement(datetime TIMESTAMP NOT NULL, latitude FLOAT NOT NULL, longitude FLOAT NOT NULL, employee_id INTEGER REFERENCES s309613.Employee NOT NULL);
CREATE TABLE s309613.Jobs_done("date" DATE NOT NULL, requests_solved INTEGER NOT NULL, scooters_delivered INTEGER NOT NULL, employee_id INTEGER REFERENCES s309613.Employee NOT NULL);
CREATE TABLE s309613.Support_request(request_id SERIAL PRIMARY KEY, request_text TEXT NOT NULL, request_reply TEXT, is_resolved BOOL, employee_id INTEGER REFERENCES s309613.Employee NOT NULL, user_id INTEGER REFERENCES s309613."User", datetime TIMESTAMP NOT NULL);
CREATE TABLE s309613.Scooter(scooter_id SERIAL PRIMARY KEY, battery_charge INTEGER NOT NULL, is_parked BOOL, latitude FLOAT NOT NULL, longitude FLOAT NOT NULL);
CREATE TABLE s309613.Parking(parking_id SERIAL PRIMARY KEY, latitude FLOAT NOT NULL, longitude FLOAT NOT NULL, is_station BOOL);
CREATE TABLE s309613.Parking_history(datetime TIMESTAMP NOT NULL, parking_id INTEGER REFERENCES s309613.Parking NOT NULL, scooter_id INTEGER REFERENCES s309613.Scooter NOT NULL);
CREATE TABLE s309613.Rent(rent_id SERIAL PRIMARY KEY, start_latitude FLOAT NOT NULL, start_longitude FLOAT NOT NULL, start_time TIMESTAMP NOT NULL, finish_latitude FLOAT NOT NULL, finish_longitude FLOAT NOT NULL, finish_time TIMESTAMP NOT NULL, user_id INTEGER REFERENCES s309613."User" NOT NULL, scooter_id INTEGER REFERENCES scooter NOT NULL);
CREATE TABLE s309613.Task(Task_id SERIAL PRIMARY KEY, parking_id INTEGER REFERENCES s309613.Parking NOT NULL, is_done BOOL, employee_id INTEGER REFERENCES s309613.Employee NOT NULL, datetime TIMESTAMP NOT NULL);
CREATE TABLE s309613.Task_scooter(task_id INTEGER REFERENCES s309613.Task NOT NULL, scooter_id INTEGER REFERENCES s309613.Scooter NOT NULL);
